action general a_switchplayer1 named "switch 1";
action general a_switchplayer2 named "switch 2";
action general a_inc named "increment";
action general a_dec named "decrement";
action general a_quit named "quit"; 

player p_player1
{
	init()
	{
		count = 0;
	}
}

player p_player2
{
	init()
	{
		count = 0;
	}
}

world
{
	function printPlayer()
	{
		Textln("current player is " + identity(player));
		Textln("player.count is " + player.count);
	}
	
	onAction(a_switchplayer1)	
	{
		SetPlayer(p_player1);
	}

	onAction(a_switchplayer2)
	{
		SetPlayer(p_player2);
	}

	onAction(a_inc)	
	{
		Textln("Incrementing player.count...");
		player.count = player.count + 1;
	}

	onAction(a_dec)
	{
		Textln("Decrementing player.count...");
		player.count = player.count - 1;
	}

	onAction(a_quit)
	{
		quit;
	}

	start()
	{
		SetPlayer(p_player1);
		Textln("Type \"switch 1\" to switch to player 1.");
		Textln("Type \"switch 2\" to switch to player 2");
		Textln("Type \"increment\" to increment player.count");
		Textln("Type \"decrement\" to decrement player.count");
		Textln("Type \"quit\" to quit.");
		printPlayer();
	}
	
	afterSuccessfulCommand()
	{
		printPlayer();
	}
	
}
